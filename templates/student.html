<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Talabalar</title>
</head>
<body>
    <h2>Talabalar ro‘yxati</h2>

    <!-- Qidiruv -->
    <form method="get">
        <input type="text" name="search" placeholder="Ism qidirish..." value="{{ search }}">
        <button type="submit">Qidirish</button>
    </form>
    <br>

    <!-- Alifbo tartibi -->
    <form method="get">
        <label for="order_input">Ism bo‘yicha tartiblash:</label>
        <select id="order_input" name="ordering">
            <option value="ism" {% if ordering == "ism" %}selected{% endif %}>A → Z</option>
            <option value="-ism" {% if ordering == "-ism" %}selected{% endif %}>Z → A</option>
        </select>
        <button type="submit">Tartiblash</button>
    </form>
    <br>

    <!-- Kurs bo‘yicha filter -->
    <form method="get">
        <label for="kurs">Kurs bo‘yicha:</label>
        <select name="kurs" id="kurs">
            <option value="">Barchasi</option>
            <option value="1" {% if kurs == "1" %}selected{% endif %}>1-kurs</option>
            <option value="2" {% if kurs == "2" %}selected{% endif %}>2-kurs</option>
            <option value="3" {% if kurs == "3" %}selected{% endif %}>3-kurs</option>
            <option value="4" {% if kurs == "4" %}selected{% endif %}>4-kurs</option>
        </select>
        <button type="submit">Filterlash</button>
    </form>
    <br>

    <!-- Talabalar ro‘yxati -->
    {% for student in students %}
        <p>
            {{ student.ism }} — {{ student.kurs }}-kurs
            | <a href="{% url 'student_update' student.id %}">
                    <button type="button">Tahrirlash</button>
                  </a>

        </p>
    {% empty %}
        <p>Hech qanday talaba topilmadi.</p>
    {% endfor %}

    <hr>
    <h3>Yangi talaba qo'shish</h3>
<form method="POST">
    {% csrf_token %}
    {{ form.as_p }}
    <button>Saqlash</button>
</form>

</body>
</html>
